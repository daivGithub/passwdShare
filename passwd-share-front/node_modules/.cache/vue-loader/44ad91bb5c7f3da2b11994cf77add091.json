{"remainingRequest":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/message/message.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/message/message.vue","mtime":1577168504907},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb29raWVzIGZyb20gImpzLWNvb2tpZSI7CmltcG9ydCB7CiAgZ2V0TWVzc2FnZVNlbmREYXRhLAogIGVkaXRNZXNzYWdlU2VuZCwKICBkZWxldGVNZXNzYWdlU2VuZAp9IGZyb20gIkAvYXBpL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtZXNzYWdlX2luZGV4IiwKICBkYXRhKCkgewogICAgY29uc3QgbWFya0FzcmVhZEJ0biA9IChoLCBwYXJhbXMpID0+IHsKICAgICAgcmV0dXJuIGgoCiAgICAgICAgIkJ1dHRvbiIsCiAgICAgICAgewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaWNvbjogIm1kLWV5ZS1vZmYiLAogICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAvLyDmoIforrDlt7Lor7sKICAgICAgICAgICAgICBsZXQgdiA9IHBhcmFtcy5yb3c7CiAgICAgICAgICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiCiAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7CiAgICAgICAgICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gMTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgIGVkaXRNZXNzYWdlU2VuZChkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICB0aGlzLnVucmVhZENvdW50IC09IDE7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcmVhZENvdW50ICs9IDE7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TWVzc2FnZUNvdW50IiwgdGhpcy51bnJlYWRDb3VudCk7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgIuagh+S4uuW3suivuyIKICAgICAgKTsKICAgIH07CiAgICBjb25zdCBkZWxldGVNZXNCdG4gPSAoaCwgcGFyYW1zKSA9PiB7CiAgICAgIHJldHVybiBoKAogICAgICAgICJCdXR0b24iLAogICAgICAgIHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGljb246ICJtZC10cmFzaCIsCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgIC8vIOenu+mZpAogICAgICAgICAgICAgIGxldCB2ID0gcGFyYW1zLnJvdzsKICAgICAgICAgICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgICAgICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsKICAgICAgICAgICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAyOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgZWRpdE1lc3NhZ2VTZW5kKGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcmVhZENvdW50IC09IDE7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVjeWNsZWJpbkNvdW50ICs9IDE7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgIuWIoOmZpCIKICAgICAgKTsKICAgIH07CiAgICBjb25zdCByZXN0b3JlQnRuID0gKGgsIHBhcmFtcykgPT4gewogICAgICByZXR1cm4gaCgKICAgICAgICAiQnV0dG9uIiwKICAgICAgICB7CiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICBpY29uOiAibWQtcmVkbyIsCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICAgIH0sCiAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICBtYXJnaW46ICIwIDVweCAwIDAiCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAvLyDov5jljp8KICAgICAgICAgICAgICBsZXQgdiA9IHBhcmFtcy5yb3c7CiAgICAgICAgICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiCiAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7CiAgICAgICAgICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gMTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgIGVkaXRNZXNzYWdlU2VuZChkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICB0aGlzLnJlY3ljbGViaW5Db3VudCAtPSAxOwogICAgICAgICAgICAgICAgICB0aGlzLmhhc3JlYWRDb3VudCArPSAxOwogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICLov5jljp8iCiAgICAgICk7CiAgICB9OwogICAgY29uc3QgZGVsZXRlUmVhbEJ0biA9IChoLCBwYXJhbXMpID0+IHsKICAgICAgcmV0dXJuIGgoCiAgICAgICAgIkJ1dHRvbiIsCiAgICAgICAgewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaWNvbjogIm1kLXRyYXNoIiwKICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgLy8g5b275bqV5Yig6ZmkCiAgICAgICAgICAgICAgbGV0IHYgPSBwYXJhbXMucm93OwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgZGVsZXRlTWVzc2FnZVNlbmQodi5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWN5Y2xlYmluQ291bnQgLT0gMTsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAi5b275bqV5Yig6ZmkIgogICAgICApOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHBhcmFtczogewogICAgICAgIHVzZXJJZDogSlNPTi5wYXJzZShDb29raWVzLmdldCgidXNlckluZm8iKSkuaWQsCiAgICAgICAgc3RhdHVzOiAwLAogICAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsAogICAgICAgIHBhZ2VTaXplOiAxMCwgLy8g6aG16Z2i5aSn5bCPCiAgICAgICAgc29ydDogImNyZWF0ZVRpbWUiLCAvLyDpu5jorqTmjpLluo/lrZfmrrUKICAgICAgICBvcmRlcjogImRlc2MiIC8vIOm7mOiupOaOkuW6j+aWueW8jwogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgdG90YWxVbnJlYWQ6IDAsCiAgICAgIHRvdGFsUmVhZDogMCwKICAgICAgdG90YWxSZW1vdmU6IDAsCiAgICAgIGN1cnJlbnRNZXNMaXN0OiBbXSwKICAgICAgdW5yZWFkTWVzTGlzdDogW10sCiAgICAgIGhhc3JlYWRNZXNMaXN0OiBbXSwKICAgICAgcmVjeWNsZWJpbkxpc3Q6IFtdLAogICAgICBjdXJyZW50TWVzc2FnZVR5cGU6ICJ1bnJlYWQiLAogICAgICBzaG93TWVzVGl0bGVMaXN0OiB0cnVlLAogICAgICB1bnJlYWRDb3VudDogMCwKICAgICAgaGFzcmVhZENvdW50OiAwLAogICAgICByZWN5Y2xlYmluQ291bnQ6IDAsCiAgICAgIG5vRGF0YVRleHQ6ICLmmoLml6DmnKror7vmtojmga8iLAogICAgICBtZXM6IHsKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgdGltZTogIiIsCiAgICAgICAgY29udGVudDogIiIKICAgICAgfSwKICAgICAgZGljdE1lc3NhZ2VUeXBlOiB0aGlzLiRzdG9yZS5zdGF0ZS5kaWN0Lm1lc3NhZ2VUeXBlLAogICAgICBtZXNUaXRsZUNvbHVtbnM6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAiaW5kZXgiLAogICAgICAgICAgd2lkdGg6IDUwLAogICAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIiAiLAogICAgICAgICAga2V5OiAidGl0bGUiLAogICAgICAgICAgYWxpZ246ICJsZWZ0IiwKICAgICAgICAgIGVsbGlwc2lzOiB0cnVlLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBoKCJzcGFuIiwgWwogICAgICAgICAgICAgIGgoCiAgICAgICAgICAgICAgICAiYSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAiMCAzMHB4IDAgMCIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TWVzVGl0bGVMaXN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcy50aXRsZSA9IHBhcmFtcy5yb3cudGl0bGU7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcy50aW1lID0gcGFyYW1zLnJvdy5jcmVhdGVUaW1lOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICLjgJAiICsgcGFyYW1zLnJvdy50eXBlICsgIuOAkSAiICsgcGFyYW1zLnJvdy50aXRsZQogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIiAiLAogICAgICAgICAga2V5OiAidGltZSIsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICB3aWR0aDogMTkwLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBoKCJzcGFuIiwgWwogICAgICAgICAgICAgIGgoIkljb24iLCB7CiAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICB0eXBlOiAibWQtdGltZSIsCiAgICAgICAgICAgICAgICAgIHNpemU6IDE2CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgbWFyZ2luOiAiMCA1cHggM3B4IDAiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgaCgic3BhbiIsIHBhcmFtcy5yb3cuY3JlYXRlVGltZSkKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIiAiLAogICAgICAgICAga2V5OiAiYXNyZWFkIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICAgIHdpZHRoOiAyMTAsCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudE1lc3NhZ2VUeXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFttYXJrQXNyZWFkQnRuKGgsIHBhcmFtcyldKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRNZXNzYWdlVHlwZSA9PSAiaGFzcmVhZCIpIHsKICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2RlbGV0ZU1lc0J0bihoLCBwYXJhbXMpXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsKICAgICAgICAgICAgICAgIHJlc3RvcmVCdG4oaCwgcGFyYW1zKSwKICAgICAgICAgICAgICAgIGRlbGV0ZVJlYWxCdG4oaCwgcGFyYW1zKQogICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlUGFnZSh2KSB7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2VOdW1iZXIgPSB2OwogICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7CiAgICB9LAogICAgY2hhbmdlUGFnZVNpemUodikgewogICAgICB0aGlzLnBhcmFtcy5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgIH0sCiAgICByZWZyZXNoTWVzc2FnZSgpIHsKICAgICAgbGV0IHN0YXR1cyA9IDA7CiAgICAgIGxldCB0eXBlID0gdGhpcy5jdXJyZW50TWVzc2FnZVR5cGU7CiAgICAgIGlmICh0eXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgc3RhdHVzID0gMDsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJoYXNyZWFkIikgewogICAgICAgIHN0YXR1cyA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdHVzID0gMjsKICAgICAgfQogICAgICB0aGlzLnBhcmFtcy5zdGF0dXMgPSBzdGF0dXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGdldE1lc3NhZ2VTZW5kRGF0YSh0aGlzLnBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5jdXJyZW50TWVzTGlzdCA9IHJlcy5yZXN1bHQuY29udGVudDsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMucmVzdWx0LnRvdGFsRWxlbWVudHM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbml0TWVzc2FnZSgpIHsKICAgICAgdGhpcy5wYXJhbXMuc3RhdHVzID0gMDsKICAgICAgZ2V0TWVzc2FnZVNlbmREYXRhKHRoaXMucGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOwogICAgICAgICAgdGhpcy5pbml0UmVhZE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRSZWFkTWVzc2FnZSgpIHsKICAgICAgdGhpcy5wYXJhbXMuc3RhdHVzID0gMTsKICAgICAgZ2V0TWVzc2FnZVNlbmREYXRhKHRoaXMucGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmhhc3JlYWRDb3VudCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsKICAgICAgICAgIHRoaXMuaW5pdFJlbW92ZU1lc3NhZ2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRSZW1vdmVNZXNzYWdlKCkgewogICAgICB0aGlzLnBhcmFtcy5zdGF0dXMgPSAyOwogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMucmVjeWNsZWJpbkNvdW50ID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOwogICAgICAgICAgdGhpcy5zZXRDdXJyZW50TWVzVHlwZSgidW5yZWFkIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGl0TWVzc2FnZShzdGF0dXMpIHsKICAgICAgZWRpdE1lc3NhZ2VTZW5kKCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZU1lc3NhZ2UoaWQpIHsKICAgICAgZGVsZXRlTWVzc2FnZVNlbmQoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBiYWNrTWVzVGl0bGVMaXN0KCkgewogICAgICB0aGlzLnNob3dNZXNUaXRsZUxpc3QgPSB0cnVlOwogICAgfSwKICAgIHNldEN1cnJlbnRNZXNUeXBlKHR5cGUpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudE1lc3NhZ2VUeXBlICE9PSB0eXBlKSB7CiAgICAgICAgdGhpcy5zaG93TWVzVGl0bGVMaXN0ID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLmN1cnJlbnRNZXNzYWdlVHlwZSA9IHR5cGU7CiAgICAgIGlmICh0eXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gIuaaguaXoOacquivu+a2iOaBryI7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiaGFzcmVhZCIpIHsKICAgICAgICB0aGlzLm5vRGF0YVRleHQgPSAi5pqC5peg5bey6K+75raI5oGvIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm5vRGF0YVRleHQgPSAi5Zue5pS256uZ5peg5raI5oGvIjsKICAgICAgfQogICAgICB0aGlzLnBhcmFtcy5wYWdlTnVtYmVyID0gMTsKICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOwogICAgfSwKICAgIGdldENvbnRlbnQodikgewogICAgICB0aGlzLm1lcy5jb250ZW50ID0gdi5jb250ZW50OwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdE1lc3NhZ2UoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbpgJrov4dpZOiOt+WPluaVsOaNrgogICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIGlmICh0by5uYW1lID09ICJtZXNzYWdlX2luZGV4IikgewogICAgICAgIHRoaXMuaW5pdE1lc3NhZ2UoKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"message.vue","sourceRoot":"src/views/message","sourcesContent":["<style lang=\"less\">\n@import \"./message.less\";\n</style>\n\n<template>\n  <div class=\"message-main-con\">\n    <div class=\"message-mainlist-con\">\n      <div>\n        <Button @click=\"setCurrentMesType('unread')\" size=\"large\" long type=\"text\">\n          <div class=\"mes-wrap\">\n            <transition name=\"mes-current-type-btn\">\n              <Icon v-show=\"currentMessageType == 'unread'\" type=\"md-checkmark\"></Icon>\n            </transition>\n            <span class=\"mes-type-btn-text\">未读消息</span>\n            <Badge\n              class=\"message-count-badge-outer\"\n              class-name=\"message-count-badge-red\"\n              :count=\"unreadCount\"\n            ></Badge>\n          </div>\n        </Button>\n      </div>\n      <div>\n        <Button @click=\"setCurrentMesType('hasread')\" size=\"large\" long type=\"text\">\n          <div class=\"mes-wrap\">\n            <transition name=\"mes-current-type-btn\">\n              <Icon v-show=\"currentMessageType == 'hasread'\" type=\"md-checkmark\"></Icon>\n            </transition>\n            <span class=\"mes-type-btn-text\">已读消息</span>\n            <Badge\n              class=\"message-count-badge-outer\"\n              class-name=\"message-count-badge\"\n              :count=\"hasreadCount\"\n            ></Badge>\n          </div>\n        </Button>\n      </div>\n      <div>\n        <Button @click=\"setCurrentMesType('recyclebin')\" size=\"large\" long type=\"text\">\n          <div class=\"mes-wrap\">\n            <transition name=\"mes-current-type-btn\">\n              <Icon v-show=\"currentMessageType == 'recyclebin'\" type=\"md-checkmark\"></Icon>\n            </transition>\n            <span class=\"mes-type-btn-text\">回收站</span>\n            <Badge\n              class=\"message-count-badge-outer\"\n              class-name=\"message-count-badge\"\n              :count=\"recyclebinCount\"\n            ></Badge>\n          </div>\n        </Button>\n      </div>\n    </div>\n    <div class=\"message-content-con\">\n      <transition name=\"view-message\">\n        <div v-if=\"showMesTitleList\" class=\"message-title-list-con\">\n          <Table\n            ref=\"messageList\"\n            :loading=\"loading\"\n            :columns=\"mesTitleColumns\"\n            :data=\"currentMesList\"\n            :no-data-text=\"noDataText\"\n          ></Table>\n          <Page\n            :current=\"params.pageNumber\"\n            :total=\"total\"\n            :page-size=\"params.pageSize\"\n            @on-change=\"changePage\"\n            @on-page-size-change=\"changePageSize\"\n            :page-size-opts=\"[5,10]\"\n            size=\"small\"\n            show-total\n            show-elevator\n            show-sizer\n            class=\"page-fix\"\n          ></Page>\n        </div>\n      </transition>\n      <transition name=\"back-message-list\">\n        <div v-if=\"!showMesTitleList\" class=\"message-view-content-con\">\n          <div class=\"message-content-top-bar\">\n            <span class=\"mes-back-btn-con\">\n              <Button type=\"text\" @click=\"backMesTitleList\">\n                <Icon type=\"ios-arrow-back\"></Icon>&nbsp;&nbsp;返回\n              </Button>\n            </span>\n            <h3 class=\"mes-title\">{{ mes.title }}</h3>\n          </div>\n          <p class=\"mes-time-con\">\n            <Icon type=\"android-time\"></Icon>\n            &nbsp;&nbsp;{{ mes.time }}\n          </p>\n          <div class=\"message-content-body\">\n            <p class=\"message-content\" v-html=\"mes.content\">{{ mes.content }}</p>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Cookies from \"js-cookie\";\nimport {\n  getMessageSendData,\n  editMessageSend,\n  deleteMessageSend\n} from \"@/api/index\";\nexport default {\n  name: \"message_index\",\n  data() {\n    const markAsreadBtn = (h, params) => {\n      return h(\n        \"Button\",\n        {\n          props: {\n            icon: \"md-eye-off\",\n            size: \"small\"\n          },\n          on: {\n            click: () => {\n              // 标记已读\n              let v = params.row;\n              // 转换null为\"\"\n              for (let attr in v) {\n                if (v[attr] == null) {\n                  v[attr] = \"\";\n                }\n              }\n              let str = JSON.stringify(v);\n              let data = JSON.parse(str);\n              data.status = 1;\n              this.loading = true;\n              editMessageSend(data).then(res => {\n                this.loading = false;\n                if (res.success) {\n                  this.$Message.success(\"操作成功\");\n                  this.unreadCount -= 1;\n                  this.hasreadCount += 1;\n                  this.$store.commit(\"setMessageCount\", this.unreadCount);\n                  this.refreshMessage();\n                }\n              });\n            }\n          }\n        },\n        \"标为已读\"\n      );\n    };\n    const deleteMesBtn = (h, params) => {\n      return h(\n        \"Button\",\n        {\n          props: {\n            icon: \"md-trash\",\n            size: \"small\",\n            type: \"error\"\n          },\n          on: {\n            click: () => {\n              // 移除\n              let v = params.row;\n              // 转换null为\"\"\n              for (let attr in v) {\n                if (v[attr] == null) {\n                  v[attr] = \"\";\n                }\n              }\n              let str = JSON.stringify(v);\n              let data = JSON.parse(str);\n              data.status = 2;\n              this.loading = true;\n              editMessageSend(data).then(res => {\n                this.loading = false;\n                if (res.success) {\n                  this.$Message.success(\"操作成功\");\n                  this.hasreadCount -= 1;\n                  this.recyclebinCount += 1;\n                  this.refreshMessage();\n                }\n              });\n            }\n          }\n        },\n        \"删除\"\n      );\n    };\n    const restoreBtn = (h, params) => {\n      return h(\n        \"Button\",\n        {\n          props: {\n            icon: \"md-redo\",\n            size: \"small\"\n          },\n          style: {\n            margin: \"0 5px 0 0\"\n          },\n          on: {\n            click: () => {\n              // 还原\n              let v = params.row;\n              // 转换null为\"\"\n              for (let attr in v) {\n                if (v[attr] == null) {\n                  v[attr] = \"\";\n                }\n              }\n              let str = JSON.stringify(v);\n              let data = JSON.parse(str);\n              data.status = 1;\n              this.loading = true;\n              editMessageSend(data).then(res => {\n                this.loading = false;\n                if (res.success) {\n                  this.$Message.success(\"操作成功\");\n                  this.recyclebinCount -= 1;\n                  this.hasreadCount += 1;\n                  this.refreshMessage();\n                }\n              });\n            }\n          }\n        },\n        \"还原\"\n      );\n    };\n    const deleteRealBtn = (h, params) => {\n      return h(\n        \"Button\",\n        {\n          props: {\n            icon: \"md-trash\",\n            size: \"small\",\n            type: \"error\"\n          },\n          on: {\n            click: () => {\n              // 彻底删除\n              let v = params.row;\n              this.loading = true;\n              deleteMessageSend(v.id).then(res => {\n                this.loading = false;\n                if (res.success) {\n                  this.$Message.success(\"操作成功\");\n                  this.recyclebinCount -= 1;\n                  this.refreshMessage();\n                }\n              });\n            }\n          }\n        },\n        \"彻底删除\"\n      );\n    };\n    return {\n      loading: true,\n      params: {\n        userId: JSON.parse(Cookies.get(\"userInfo\")).id,\n        status: 0,\n        pageNumber: 1, // 当前页数\n        pageSize: 10, // 页面大小\n        sort: \"createTime\", // 默认排序字段\n        order: \"desc\" // 默认排序方式\n      },\n      total: 0,\n      totalUnread: 0,\n      totalRead: 0,\n      totalRemove: 0,\n      currentMesList: [],\n      unreadMesList: [],\n      hasreadMesList: [],\n      recyclebinList: [],\n      currentMessageType: \"unread\",\n      showMesTitleList: true,\n      unreadCount: 0,\n      hasreadCount: 0,\n      recyclebinCount: 0,\n      noDataText: \"暂无未读消息\",\n      mes: {\n        title: \"\",\n        time: \"\",\n        content: \"\"\n      },\n      dictMessageType: this.$store.state.dict.messageType,\n      mesTitleColumns: [\n        {\n          type: \"index\",\n          width: 50,\n          align: \"center\"\n        },\n        {\n          title: \" \",\n          key: \"title\",\n          align: \"left\",\n          ellipsis: true,\n          render: (h, params) => {\n            return h(\"span\", [\n              h(\n                \"a\",\n                {\n                  style: {\n                    margin: \"0 30px 0 0\"\n                  },\n                  on: {\n                    click: () => {\n                      this.showMesTitleList = false;\n                      this.mes.title = params.row.title;\n                      this.mes.time = params.row.createTime;\n                      this.getContent(params.row);\n                    }\n                  }\n                },\n                \"【\" + params.row.type + \"】 \" + params.row.title\n              )\n            ]);\n          }\n        },\n        {\n          title: \" \",\n          key: \"time\",\n          align: \"center\",\n          width: 190,\n          render: (h, params) => {\n            return h(\"span\", [\n              h(\"Icon\", {\n                props: {\n                  type: \"md-time\",\n                  size: 16\n                },\n                style: {\n                  margin: \"0 5px 3px 0\"\n                }\n              }),\n              h(\"span\", params.row.createTime)\n            ]);\n          }\n        },\n        {\n          title: \" \",\n          key: \"asread\",\n          align: \"center\",\n          width: 210,\n          render: (h, params) => {\n            if (this.currentMessageType == \"unread\") {\n              return h(\"div\", [markAsreadBtn(h, params)]);\n            } else if (this.currentMessageType == \"hasread\") {\n              return h(\"div\", [deleteMesBtn(h, params)]);\n            } else {\n              return h(\"div\", [\n                restoreBtn(h, params),\n                deleteRealBtn(h, params)\n              ]);\n            }\n          }\n        }\n      ]\n    };\n  },\n  methods: {\n    changePage(v) {\n      this.params.pageNumber = v;\n      this.refreshMessage();\n    },\n    changePageSize(v) {\n      this.params.pageSize = v;\n      this.refreshMessage();\n    },\n    refreshMessage() {\n      let status = 0;\n      let type = this.currentMessageType;\n      if (type == \"unread\") {\n        status = 0;\n      } else if (type == \"hasread\") {\n        status = 1;\n      } else {\n        status = 2;\n      }\n      this.params.status = status;\n      this.loading = true;\n      getMessageSendData(this.params).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.currentMesList = res.result.content;\n          this.total = res.result.totalElements;\n        }\n      });\n    },\n    initMessage() {\n      this.params.status = 0;\n      getMessageSendData(this.params).then(res => {\n        if (res.success) {\n          this.unreadCount = res.result.totalElements;\n          this.initReadMessage();\n        }\n      });\n    },\n    initReadMessage() {\n      this.params.status = 1;\n      getMessageSendData(this.params).then(res => {\n        if (res.success) {\n          this.hasreadCount = res.result.totalElements;\n          this.initRemoveMessage();\n        }\n      });\n    },\n    initRemoveMessage() {\n      this.params.status = 2;\n      getMessageSendData(this.params).then(res => {\n        if (res.success) {\n          this.recyclebinCount = res.result.totalElements;\n          this.setCurrentMesType(\"unread\");\n        }\n      });\n    },\n    editMessage(status) {\n      editMessageSend().then(res => {\n        if (res.success) {\n          this.$Message.success(\"操作成功\");\n        }\n      });\n    },\n    deleteMessage(id) {\n      deleteMessageSend(id).then(res => {\n        if (res.success) {\n          this.$Message.success(\"删除成功\");\n        }\n      });\n    },\n    backMesTitleList() {\n      this.showMesTitleList = true;\n    },\n    setCurrentMesType(type) {\n      if (this.currentMessageType !== type) {\n        this.showMesTitleList = true;\n      }\n      this.currentMessageType = type;\n      if (type == \"unread\") {\n        this.noDataText = \"暂无未读消息\";\n      } else if (type == \"hasread\") {\n        this.noDataText = \"暂无已读消息\";\n      } else {\n        this.noDataText = \"回收站无消息\";\n      }\n      this.params.pageNumber = 1;\n      this.refreshMessage();\n    },\n    getContent(v) {\n      this.mes.content = v.content;\n    }\n  },\n  mounted() {\n    this.initMessage();\n  },\n  watch: {\n    // 监听路由变化通过id获取数据\n    $route(to, from) {\n      if (to.name == \"message_index\") {\n        this.initMessage();\n      }\n    }\n  }\n};\n</script>\n\n"]}]}