{"remainingRequest":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/activiti/business/leave.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/activiti/business/leave.vue","mtime":1577168504900},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0TGVhdmVEYXRhLAogIGFkZExlYXZlLAogIHVwZGF0ZUxlYXZlLAogIGFwcGx5TGVhdmUKfSBmcm9tICJAL2FwaS9hY3Rpdml0aSI7CmltcG9ydCBwcmludEpTIGZyb20gInByaW50LWpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsZWF2ZS1ub3RjYWNoZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLCAvLyDooajljZXliqDovb3nirbmgIEKICAgICAgbW9kYWxWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VsZWN0RGF0ZTogbnVsbCwKICAgICAgZGljdFR5cGU6IHRoaXMuJHN0b3JlLnN0YXRlLmRpY3QubGVhdmVUeXBlLAogICAgICBmb3JtOiB7CiAgICAgICAgLy8g5re75Yqg5oiW57yW6L6R6KGo5Y2V5a+56LGh5Yid5aeL5YyW5pWw5o2uCiAgICAgICAgdHlwZTogIiIsCiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgICBzdGFydERhdGU6ICIiLAogICAgICAgIGVuZERhdGU6ICIiLAogICAgICAgIGR1cmF0aW9uOiAwCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICAgIHR5cGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi57G75Z6L5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuagh+mimOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICBkZXNjcmlwdGlvbjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWOn+WboOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXQogICAgICB9LAogICAgICBlcnJvck1zZzogIiIsCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLCAvLyDmt7vliqDmiJbnvJbovpHmj5DkuqTnirbmgIEKICAgICAgcHJvY2Vzc0xpc3Q6IFtdLAogICAgICBiYWNrUm91dGU6ICIiLAogICAgICBwcm9jRGVmSWQ6ICIiLAogICAgICBvcHRpb25zOiB7CiAgICAgICAgc2hvcnRjdXRzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHQ6ICIxIOWkqSIsCiAgICAgICAgICAgIHZhbHVlKCkgewogICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgIGVuZC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSk7CiAgICAgICAgICAgICAgcmV0dXJuIFtzdGFydCwgZW5kXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogIjIg5aSpIiwKICAgICAgICAgICAgdmFsdWUoKSB7CiAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgZW5kLnNldFRpbWUoc3RhcnQuZ2V0VGltZSgpICsgMzYwMCAqIDEwMDAgKiAyNCAqIDEpOwogICAgICAgICAgICAgIHJldHVybiBbc3RhcnQsIGVuZF07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHQ6ICIzIOWkqSIsCiAgICAgICAgICAgIHZhbHVlKCkgewogICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgIGVuZC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSArIDM2MDAgKiAxMDAwICogMjQgKiAyKTsKICAgICAgICAgICAgICByZXR1cm4gW3N0YXJ0LCBlbmRdOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0ZXh0OiAiMSDlkagiLAogICAgICAgICAgICB2YWx1ZSgpIHsKICAgICAgICAgICAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICBlbmQuc2V0VGltZShzdGFydC5nZXRUaW1lKCkgKyAzNjAwICogMTAwMCAqIDI0ICogNik7CiAgICAgICAgICAgICAgcmV0dXJuIFtzdGFydCwgZW5kXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogIjEg5Liq5pyIIiwKICAgICAgICAgICAgdmFsdWUoKSB7CiAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgZW5kLnNldFRpbWUoc3RhcnQuZ2V0VGltZSgpICsgMzYwMCAqIDEwMDAgKiAyNCAqIDI5KTsKICAgICAgICAgICAgICByZXR1cm4gW3N0YXJ0LCBlbmRdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy50eXBlID0gdGhpcy4kcm91dGUucXVlcnkudHlwZTsKICAgICAgdGhpcy5iYWNrUm91dGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5iYWNrUm91dGU7CiAgICAgIHRoaXMucHJvY0RlZklkID0gdGhpcy4kcm91dGUucXVlcnkucHJvY0RlZklkOwogICAgICBpZiAodGhpcy50eXBlICE9IDApIHsKICAgICAgICB0aGlzLmZvcm0uaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgICB0aGlzLnNlbGVjdERhdGUgPSBbXTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdERhdGVSYW5nZSh2KSB7CiAgICAgIGlmICh2WzBdKSB7CiAgICAgICAgdGhpcy5mb3JtLnN0YXJ0RGF0ZSA9IHZbMF07CiAgICAgICAgdGhpcy5mb3JtLmVuZERhdGUgPSB2WzFdOwogICAgICAgIGxldCBkYXRlMSA9IHRoaXMuc3RyaW5nVG9EYXRlKHRoaXMuZm9ybS5zdGFydERhdGUpOwogICAgICAgIGxldCBkYXRlMiA9IHRoaXMuc3RyaW5nVG9EYXRlKHRoaXMuZm9ybS5lbmREYXRlKTsKICAgICAgICBsZXQgZGF0ZSA9IGRhdGUyLmdldFRpbWUoKSAtIGRhdGUxLmdldFRpbWUoKTsKICAgICAgICBsZXQgaG91cnMgPSBNYXRoLnJvdW5kKGRhdGUgLyAoNjAgKiA2MCAqIDEwMDApKTsKICAgICAgICB0aGlzLmZvcm0uZHVyYXRpb24gPSBob3VyczsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0uc3RhcnREYXRlID0gIiI7CiAgICAgICAgdGhpcy5mb3JtLmVuZERhdGUgPSAiIjsKICAgICAgICB0aGlzLmZvcm0uZHVyYXRpb24gPSAwOwogICAgICB9CiAgICB9LAogICAgc3RyaW5nVG9EYXRlKHN0cikgewogICAgICBsZXQgdGVtcFN0cnMgPSBzdHIuc3BsaXQoIiAiKTsKICAgICAgbGV0IGRhdGVTdHJzID0gdGVtcFN0cnNbMF0uc3BsaXQoIi0iKTsKICAgICAgbGV0IHllYXIgPSBwYXJzZUludChkYXRlU3Ryc1swXSwgMTApOwogICAgICBsZXQgbW9udGggPSBwYXJzZUludChkYXRlU3Ryc1sxXSwgMTApIC0gMTsKICAgICAgbGV0IGRheSA9IHBhcnNlSW50KGRhdGVTdHJzWzJdLCAxMCk7CiAgICAgIGxldCB0aW1lU3RycyA9IHRlbXBTdHJzWzFdLnNwbGl0KCI6Iik7CiAgICAgIGxldCBob3VyID0gcGFyc2VJbnQodGltZVN0cnNbMF0sIDEwKTsKICAgICAgbGV0IG1pbnV0ZSA9IHBhcnNlSW50KHRpbWVTdHJzWzFdLCAxMCk7CiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9LAogICAgZ2V0RGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0TGVhdmVEYXRhKHRoaXMuZm9ybS5pZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiCiAgICAgICAgICBsZXQgdiA9IHJlcy5yZXN1bHQ7CiAgICAgICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsKICAgICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgICB0aGlzLmZvcm0gPSBkYXRhOwogICAgICAgICAgdGhpcy5zZWxlY3REYXRlID0gW107CiAgICAgICAgICB0aGlzLnNlbGVjdERhdGVbMF0gPSBkYXRhLnN0YXJ0RGF0ZTsKICAgICAgICAgIHRoaXMuc2VsZWN0RGF0ZVsxXSA9IGRhdGEuZW5kRGF0ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRlbFN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICghdGhpcy5mb3JtLnN0YXJ0RGF0ZSkgewogICAgICAgICAgICB0aGlzLmVycm9yTXNnID0gIuivt+mAieaLqeaXtumXtOiMg+WbtCI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAiIjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgICAgICAgICBpZiAodGhpcy50eXBlID09IDApIHsKICAgICAgICAgICAgLy8g5re75YqgIOmBv+WFjee8lui+keWQjuS8oOWFpWlk562J5pWw5o2uIOiusOW+l+WIoOmZpAogICAgICAgICAgICBkZWxldGUgdGhpcy5mb3JtLmlkOwogICAgICAgICAgICB0aGlzLmZvcm0ucHJvY0RlZklkID0gdGhpcy5wcm9jRGVmSWQ7CiAgICAgICAgICAgIGFkZExlYXZlKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAxKSB7CiAgICAgICAgICAgIC8vIOe8lui+kQogICAgICAgICAgICB1cGRhdGVMZWF2ZSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ3VycmVudFBhZ2UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGVsUHJpbnQoKSB7CiAgICAgIGxldCBkYXRhID0gW107CiAgICAgIGxldCBsZWF2ZSA9IHsKICAgICAgICDnlLPor7fkuro6IHRoaXMuZm9ybS5jcmVhdGVCeSwKICAgICAgICDor7flgYfnsbvlnos6IHRoaXMuZm9ybS50eXBlLAogICAgICAgIOagh+mimDogdGhpcy5mb3JtLnRpdGxlLAogICAgICAgIOWOn+WboDogdGhpcy5mb3JtLmRlc2NyaXB0aW9uLAogICAgICAgIOivt+WBh+W8gOWni+aXtumXtDogdGhpcy5mb3JtLnN0YXJ0RGF0ZSwKICAgICAgICDor7flgYfnu5PmnZ/ml7bpl7Q6IHRoaXMuZm9ybS5lbmREYXRlLAogICAgICAgIOaMgee7reaXtumVvzogdGhpcy5mb3JtLmR1cmF0aW9uICsgIiDlsI/ml7YiCiAgICAgIH07CiAgICAgIGRhdGEucHVzaChsZWF2ZSk7CiAgICAgIHByaW50SlMoewogICAgICAgIHByaW50YWJsZTogZGF0YSwKICAgICAgICB0eXBlOiAianNvbiIsCiAgICAgICAgaGVhZGVyOiAi6K+35YGH55Sz6K+36KGoIiwKICAgICAgICBncmlkU3R5bGU6ICJib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyYXk7dGV4dC1hbGlnbjpjZW50ZXIiLAogICAgICAgIHByb3BlcnRpZXM6IFsKICAgICAgICAgICLnlLPor7fkuroiLAogICAgICAgICAgIuivt+WBh+exu+WeiyIsCiAgICAgICAgICAi5qCH6aKYIiwKICAgICAgICAgICLljp/lm6AiLAogICAgICAgICAgIuivt+WBh+W8gOWni+aXtumXtCIsCiAgICAgICAgICAi6K+35YGH57uT5p2f5pe26Ze0IiwKICAgICAgICAgICLmjIHnu63ml7bplb8iCiAgICAgICAgXQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kZWxDYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgfSwKICAgIC8vIOWFs+mXreW9k+WJjemhtemdogogICAgY2xvc2VDdXJyZW50UGFnZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVUYWciLCAibGVhdmUiKTsKICAgICAgbG9jYWxTdG9yYWdlLnBhZ2VPcGVuZWRMaXN0ID0gSlNPTi5zdHJpbmdpZnkoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYXBwLnBhZ2VPcGVuZWRMaXN0CiAgICAgICk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiB0aGlzLmJhY2tSb3V0ZQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJYKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZiAodG8ubmFtZSA9PSAibGVhdmUiKSB7CiAgICAgICAgdGhpcy5nZXREaWN0RGF0YSgpOwogICAgICAgIHRoaXMudHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGU7CiAgICAgICAgdGhpcy5iYWNrUm91dGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5iYWNrUm91dGU7CiAgICAgICAgdGhpcy5wcm9jRGVmSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5wcm9jRGVmSWQ7CiAgICAgICAgaWYgKHRoaXMudHlwZSAhPSAwKSB7CiAgICAgICAgICB0aGlzLmZvcm0uaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgICAgIHRoaXMuc2VsZWN0RGF0ZSA9IFtdOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["leave.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"leave.vue","sourceRoot":"src/views/activiti/business","sourcesContent":["<style lang=\"less\">\n</style>\n<template>\n  <div class=\"search\">\n    <Card>\n      <p slot=\"title\">\n        <span v-if=\"type==0\">新增请假申请</span>\n        <span v-else-if=\"type==1\">编辑请假申请</span>\n        <span v-else>查看请假申请详情</span>\n      </p>\n      <Row>\n        <Form\n          ref=\"form\"\n          :model=\"form\"\n          :label-width=\"100\"\n          :rules=\"formValidate\"\n          style=\"position:relative\"\n        >\n          <FormItem label=\"请假申请人\" prop=\"title\" v-if=\"type!=0&&type!=1\">{{form.createBy}}</FormItem>\n          <FormItem label=\"请假类型\" prop=\"type\">\n            <Select v-model=\"form.type\" placeholder=\"请选择\" style=\"width: 200px\">\n              <Option v-for=\"(item, i) in dictType\" :key=\"i\" :value=\"item.value\">{{item.title}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem label=\"标题\" prop=\"title\">\n            <Input v-model=\"form.title\" style=\"width:550px\" />\n          </FormItem>\n          <FormItem label=\"原因\" prop=\"description\">\n            <Input\n              type=\"textarea\"\n              v-model=\"form.description\"\n              :rows=\"5\"\n              placeholder=\"请输入详细情况\"\n              style=\"width: 550px\"\n            />\n          </FormItem>\n          <FormItem label=\"请假时间范围\" :error=\"errorMsg\">\n            <DatePicker\n              v-model=\"selectDate\"\n              :options=\"options\"\n              type=\"datetimerange\"\n              format=\"yyyy-MM-dd HH:mm\"\n              clearable\n              @on-change=\"selectDateRange\"\n              placeholder=\"选择起始时间\"\n              style=\"width: 550px\"\n            ></DatePicker>\n          </FormItem>\n          <FormItem label=\"请假时长\">{{form.duration}} 小时</FormItem>\n          <Form-item class=\"br\">\n            <Button\n              type=\"primary\"\n              :loading=\"submitLoading\"\n              @click=\"handelSubmit\"\n              v-if=\"type==0||type==1\"\n            >保存并关闭</Button>\n            <Button @click=\"handelPrint\" v-if=\"type!=0\" type=\"info\">打印</Button>\n            <Button @click=\"handelCancel\">关闭</Button>\n          </Form-item>\n          <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n        </Form>\n      </Row>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport {\n  getLeaveData,\n  addLeave,\n  updateLeave,\n  applyLeave\n} from \"@/api/activiti\";\nimport printJS from \"print-js\";\nexport default {\n  name: \"leave-notcache\",\n  data() {\n    return {\n      type: 0,\n      loading: false, // 表单加载状态\n      modalVisible: false,\n      selectDate: null,\n      dictType: this.$store.state.dict.leaveType,\n      form: {\n        // 添加或编辑表单对象初始化数据\n        type: \"\",\n        title: \"\",\n        description: \"\",\n        startDate: \"\",\n        endDate: \"\",\n        duration: 0\n      },\n      formValidate: {\n        // 表单验证规则\n        type: [{ required: true, message: \"类型不能为空\", trigger: \"blur\" }],\n        title: [{ required: true, message: \"标题不能为空\", trigger: \"blur\" }],\n        description: [\n          { required: true, message: \"原因不能为空\", trigger: \"blur\" }\n        ]\n      },\n      errorMsg: \"\",\n      submitLoading: false, // 添加或编辑提交状态\n      processList: [],\n      backRoute: \"\",\n      procDefId: \"\",\n      options: {\n        shortcuts: [\n          {\n            text: \"1 天\",\n            value() {\n              const end = new Date();\n              const start = new Date();\n              end.setTime(start.getTime());\n              return [start, end];\n            }\n          },\n          {\n            text: \"2 天\",\n            value() {\n              const end = new Date();\n              const start = new Date();\n              end.setTime(start.getTime() + 3600 * 1000 * 24 * 1);\n              return [start, end];\n            }\n          },\n          {\n            text: \"3 天\",\n            value() {\n              const end = new Date();\n              const start = new Date();\n              end.setTime(start.getTime() + 3600 * 1000 * 24 * 2);\n              return [start, end];\n            }\n          },\n          {\n            text: \"1 周\",\n            value() {\n              const end = new Date();\n              const start = new Date();\n              end.setTime(start.getTime() + 3600 * 1000 * 24 * 6);\n              return [start, end];\n            }\n          },\n          {\n            text: \"1 个月\",\n            value() {\n              const end = new Date();\n              const start = new Date();\n              end.setTime(start.getTime() + 3600 * 1000 * 24 * 29);\n              return [start, end];\n            }\n          }\n        ]\n      }\n    };\n  },\n  methods: {\n    init() {\n      this.type = this.$route.query.type;\n      this.backRoute = this.$route.query.backRoute;\n      this.procDefId = this.$route.query.procDefId;\n      if (this.type != 0) {\n        this.form.id = this.$route.query.id;\n        this.getData();\n      } else {\n        this.$refs.form.resetFields();\n        this.selectDate = [];\n      }\n    },\n    selectDateRange(v) {\n      if (v[0]) {\n        this.form.startDate = v[0];\n        this.form.endDate = v[1];\n        let date1 = this.stringToDate(this.form.startDate);\n        let date2 = this.stringToDate(this.form.endDate);\n        let date = date2.getTime() - date1.getTime();\n        let hours = Math.round(date / (60 * 60 * 1000));\n        this.form.duration = hours;\n      } else {\n        this.form.startDate = \"\";\n        this.form.endDate = \"\";\n        this.form.duration = 0;\n      }\n    },\n    stringToDate(str) {\n      let tempStrs = str.split(\" \");\n      let dateStrs = tempStrs[0].split(\"-\");\n      let year = parseInt(dateStrs[0], 10);\n      let month = parseInt(dateStrs[1], 10) - 1;\n      let day = parseInt(dateStrs[2], 10);\n      let timeStrs = tempStrs[1].split(\":\");\n      let hour = parseInt(timeStrs[0], 10);\n      let minute = parseInt(timeStrs[1], 10);\n      let date = new Date(year, month, day, hour, minute, 0);\n      return date;\n    },\n    getData() {\n      this.loading = true;\n      getLeaveData(this.form.id).then(res => {\n        this.loading = false;\n        if (res.success) {\n          // 转换null为\"\"\n          let v = res.result;\n          for (let attr in v) {\n            if (v[attr] == null) {\n              v[attr] = \"\";\n            }\n          }\n          let str = JSON.stringify(v);\n          let data = JSON.parse(str);\n          this.form = data;\n          this.selectDate = [];\n          this.selectDate[0] = data.startDate;\n          this.selectDate[1] = data.endDate;\n        }\n      });\n    },\n    handelSubmit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          if (!this.form.startDate) {\n            this.errorMsg = \"请选择时间范围\";\n            return;\n          } else {\n            this.errorMsg = \"\";\n          }\n          this.submitLoading = true;\n          if (this.type == 0) {\n            // 添加 避免编辑后传入id等数据 记得删除\n            delete this.form.id;\n            this.form.procDefId = this.procDefId;\n            addLeave(this.form).then(res => {\n              this.submitLoading = false;\n              if (res.success) {\n                this.$Message.success(\"操作成功\");\n                this.closeCurrentPage();\n              }\n            });\n          } else if (this.type == 1) {\n            // 编辑\n            updateLeave(this.form).then(res => {\n              this.submitLoading = false;\n              if (res.success) {\n                this.$Message.success(\"操作成功\");\n                this.closeCurrentPage();\n              }\n            });\n          }\n        }\n      });\n    },\n    handelPrint() {\n      let data = [];\n      let leave = {\n        申请人: this.form.createBy,\n        请假类型: this.form.type,\n        标题: this.form.title,\n        原因: this.form.description,\n        请假开始时间: this.form.startDate,\n        请假结束时间: this.form.endDate,\n        持续时长: this.form.duration + \" 小时\"\n      };\n      data.push(leave);\n      printJS({\n        printable: data,\n        type: \"json\",\n        header: \"请假申请表\",\n        gridStyle: \"border: 1px solid lightgray;text-align:center\",\n        properties: [\n          \"申请人\",\n          \"请假类型\",\n          \"标题\",\n          \"原因\",\n          \"请假开始时间\",\n          \"请假结束时间\",\n          \"持续时长\"\n        ]\n      });\n    },\n    handelCancel() {\n      this.closeCurrentPage();\n    },\n    // 关闭当前页面\n    closeCurrentPage() {\n      this.$store.commit(\"removeTag\", \"leave\");\n      localStorage.pageOpenedList = JSON.stringify(\n        this.$store.state.app.pageOpenedList\n      );\n      this.$router.push({\n        name: this.backRoute\n      });\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n    // 监听路由变化\n    $route(to, from) {\n      if (to.name == \"leave\") {\n        this.getDictData();\n        this.type = this.$route.query.type;\n        this.backRoute = this.$route.query.backRoute;\n        this.procDefId = this.$route.query.procDefId;\n        if (this.type != 0) {\n          this.form.id = this.$route.query.id;\n          this.getData();\n        } else {\n          this.$refs.form.resetFields();\n          this.selectDate = [];\n        }\n      }\n    }\n  }\n};\n</script>"]}]}