{"remainingRequest":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/activiti/process-manage/processManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/activiti/process-manage/processManage.vue","mtime":1577168504902},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0UHJvY2Vzc0RhdGFMaXN0LAogIHVwZGF0ZUluZm8sCiAgdXBkYXRlU3RhdHVzLAogIGRlcGxveUJ5RmlsZSwKICBleHBvcnRSZXNvdXJjZSwKICBjb252ZXJ0VG9Nb2RlbCwKICBkZWxldGVQcm9jZXNzLAogIGluaXRBY3RDYXRlZ29yeSwKICBsb2FkQWN0Q2F0ZWdvcnksCiAgc2VhcmNoQWN0Q2F0ZWdvcnkKfSBmcm9tICJAL2FwaS9hY3Rpdml0aSI7CmltcG9ydCB7IGdldERpY3REYXRhQnlUeXBlIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwcm9jZXNzLW1hbmFnZSIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcGVuU2VhcmNoOiB0cnVlLAogICAgICBvcGVuVGlwOiB0cnVlLAogICAgICBhY2Nlc3NUb2tlbjoge30sCiAgICAgIGRlcGxveUJ5RmlsZVVybDogIiIsCiAgICAgIGxvYWRpbmc6IHRydWUsIC8vIOihqOWNleWKoOi9veeKtuaAgQogICAgICBzZWxlY3RDb3VudDogMCwgLy8g5aSa6YCJ6K6h5pWwCiAgICAgIHNlbGVjdExpc3Q6IFtdLCAvLyDlpJrpgInmlbDmja4KICAgICAgdmlld0ltYWdlOiBmYWxzZSwKICAgICAgdmlld1RpdGxlOiAi5rWB56iL5Zu+54mH6aKE6KeIIiwKICAgICAgZGlhZ3JhbVVybDogIiIsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICAvLyDmkJzntKLmoYblr7nlupRkYXRh5a+56LGhCiAgICAgICAgc2hvd0xhdGVzdDogdHJ1ZSwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBwcm9jZXNzS2V5OiAiIiwKICAgICAgICBzdGF0dXM6ICIiLAogICAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsAogICAgICAgIHBhZ2VTaXplOiAxMCwgLy8g6aG16Z2i5aSn5bCPCiAgICAgICAgc29ydDogImNyZWF0ZVRpbWUiLCAvLyDpu5jorqTmjpLluo/lrZfmrrUKICAgICAgICBvcmRlcjogImRlc2MiLCAvLyDpu5jorqTmjpLluo/mlrnlvI8KICAgICAgICBzdGFydERhdGU6ICIiLCAvLyDotbflp4vml7bpl7QKICAgICAgICBlbmREYXRlOiAiIiAvLyDnu4jmraLml7bpl7QKICAgICAgfSwKICAgICAgc2VsZWN0RGF0ZTogbnVsbCwgLy8g6YCJ5oup5pel5pyf57uR5a6abW9kYWwKICAgICAgbW9kYWxWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdE1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIGRhdGFDYXQ6IFtdLAogICAgICBjYXRMb2FkaW5nOiBmYWxzZSwKICAgICAgc2VhcmNoS2V5OiAiIiwKICAgICAgZm9ybTogewogICAgICAgIHJvdXRlTmFtZTogIiIsCiAgICAgICAgYnVzaW5lc3NUYWJsZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIHJvdXRlTmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgYnVzaW5lc3NUYWJsZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXQogICAgICB9LAogICAgICBjYXRlZ29yeVRpdGxlOiAiIiwKICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsIC8vIOa3u+WKoOaIlue8lui+keaPkOS6pOeKtuaAgQogICAgICBjb2x1bW5zOiBbCiAgICAgICAgLy8g6KGo5aS0CiAgICAgICAgewogICAgICAgICAgdHlwZTogInNlbGVjdGlvbiIsCiAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICJpbmRleCIsCiAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAi5ZCN56ewIiwKICAgICAgICAgIGtleTogIm5hbWUiLAogICAgICAgICAgbWluV2lkdGg6IDE1MCwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIuagh+ivhktleSIsCiAgICAgICAgICBrZXk6ICJwcm9jZXNzS2V5IiwKICAgICAgICAgIHdpZHRoOiAxMzAsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLniYjmnKwiLAogICAgICAgICAga2V5OiAidmVyc2lvbiIsCiAgICAgICAgICB3aWR0aDogOTAsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gewogICAgICAgICAgICBsZXQgcmUgPSAiIjsKICAgICAgICAgICAgaWYgKHBhcmFtcy5yb3cudmVyc2lvbikgewogICAgICAgICAgICAgIHJlID0gInYuIiArIHBhcmFtcy5yb3cudmVyc2lvbjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgcmUpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLmtYHnqIvlm77niYciLAogICAgICAgICAga2V5OiAiZGlhZ3JhbU5hbWUiLAogICAgICAgICAgd2lkdGg6IDE2MCwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbCiAgICAgICAgICAgICAgaCgKICAgICAgICAgICAgICAgICJhIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzb3VyY2UoMSwgcGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFyYW1zLnJvdy5kaWFncmFtTmFtZQogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIua1geeoi1hNTCIsCiAgICAgICAgICBrZXk6ICJ4bWxOYW1lIiwKICAgICAgICAgIHdpZHRoOiAxNjAsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gewogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWwogICAgICAgICAgICAgIGgoCiAgICAgICAgICAgICAgICAiYSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jlc291cmNlKDAsIHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcmFtcy5yb3cueG1sTmFtZQogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIuWFs+iBlOihqOWNlei3r+eUseWQjSIsCiAgICAgICAgICBrZXk6ICJyb3V0ZU5hbWUiLAogICAgICAgICAgd2lkdGg6IDE2MCwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIGxldCByZSA9ICIiOwogICAgICAgICAgICB0aGlzLmRpY3RGb3JtLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgaWYgKGUudmFsdWUgPT0gcGFyYW1zLnJvdy5yb3V0ZU5hbWUpIHsKICAgICAgICAgICAgICAgIHJlID0gYCR7ZS50aXRsZX0gKCR7ZS52YWx1ZX0pYDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgcmUpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLmlbDmja7lupPkuJrliqHooagiLAogICAgICAgICAga2V5OiAiYnVzaW5lc3NUYWJsZSIsCiAgICAgICAgICB3aWR0aDogMTcwLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgICAgbGV0IHJlID0gIiI7CiAgICAgICAgICAgIHRoaXMuZGljdFRhYmxlLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgaWYgKGUudmFsdWUgPT0gcGFyYW1zLnJvdy5idXNpbmVzc1RhYmxlKSB7CiAgICAgICAgICAgICAgICByZSA9IGAke2UudGl0bGV9ICgke2UudmFsdWV9KWA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIHJlKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAi5omA5bGe5YiG57G7IiwKICAgICAgICAgIGtleTogImNhdGVnb3J5VGl0bGUiLAogICAgICAgICAgd2lkdGg6IDEzMCwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIueKtuaAgSIsCiAgICAgICAgICBrZXk6ICJzdGF0dXMiLAogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgICAgd2lkdGg6IDEzMCwKICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gewogICAgICAgICAgICBpZiAocGFyYW1zLnJvdy5zdGF0dXMgPT0gMSkgewogICAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbCiAgICAgICAgICAgICAgICBoKCJCYWRnZSIsIHsKICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi5bey5r+A5rS7IgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWwogICAgICAgICAgICAgICAgaCgiQmFkZ2UiLCB7CiAgICAgICAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRleHQ6ICLlt7LmjILotbciCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBmaWx0ZXJzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBsYWJlbDogIuW3sua/gOa0uyIsCiAgICAgICAgICAgICAgdmFsdWU6IDEKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAi5bey5oyC6LW3IiwKICAgICAgICAgICAgICB2YWx1ZTogMAogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgZmlsdGVyTXVsdGlwbGU6IGZhbHNlLAogICAgICAgICAgZmlsdGVyTWV0aG9kKHZhbHVlLCByb3cpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gcm93LnN0YXR1cyA9PSAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gcm93LnN0YXR1cyA9PSAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIuWkh+azqOaPj+i/sCIsCiAgICAgICAgICBrZXk6ICJkZXNjcmlwdGlvbiIsCiAgICAgICAgICB3aWR0aDogMTUwLAogICAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAi6YOo572y5pe26Ze0IiwKICAgICAgICAgIGtleTogImNyZWF0ZVRpbWUiLAogICAgICAgICAgd2lkdGg6IDE4MCwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgc29ydFR5cGU6ICJkZXNjIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLmm7TmlrDml7bpl7QiLAogICAgICAgICAga2V5OiAidXBkYXRlVGltZSIsCiAgICAgICAgICB3aWR0aDogMTgwLAogICAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAi5pON5L2cIiwKICAgICAgICAgIGtleTogImFjdGlvbiIsCiAgICAgICAgICB3aWR0aDogMzY1LAogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgICAgZml4ZWQ6ICJyaWdodCIsCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgICAgbGV0IHN1c3BlbmRPckFjdGl2ZSA9ICIiOwogICAgICAgICAgICBpZiAocGFyYW1zLnJvdy5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgIC8vIOaMgui1t+WPr+a/gOa0uwogICAgICAgICAgICAgIHN1c3BlbmRPckFjdGl2ZSA9IGgoCiAgICAgICAgICAgICAgICAiQnV0dG9uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICAgICAgICBpY29uOiAibWQtcGxheSIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogIjVweCIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0U3RhdHVzKDEsIHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICLmv4DmtLsiCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDmv4DmtLvlj6/mjILotbcKICAgICAgICAgICAgICBzdXNwZW5kT3JBY3RpdmUgPSBoKAogICAgICAgICAgICAgICAgIkJ1dHRvbiIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogIm1kLXBhdXNlIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiAiNXB4IgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRTdGF0dXMoMCwgcGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgIuaMgui1tyIKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbCiAgICAgICAgICAgICAgc3VzcGVuZE9yQWN0aXZlLAogICAgICAgICAgICAgIGgoCiAgICAgICAgICAgICAgICAiQnV0dG9uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9nby1idWZmZXIiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICI1cHgiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE5vZGUocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgIuiKgueCueiuvue9riIKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIGgoCiAgICAgICAgICAgICAgICAiQnV0dG9uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICI1cHgiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdChwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAi57yW6L6RIgogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgaCgKICAgICAgICAgICAgICAgICJCdXR0b24iLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICI1cHgiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydChwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAi6L2s5qih5Z6LIgogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgaCgKICAgICAgICAgICAgICAgICJCdXR0b24iLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAi5Yig6ZmkIgogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdLAogICAgICBkYXRhOiBbXSwgLy8g6KGo5Y2V5pWw5o2uCiAgICAgIHRvdGFsOiAwLCAvLyDooajljZXmlbDmja7mgLvmlbAKICAgICAgZGljdFRhYmxlOiBbXSwKICAgICAgZGljdEZvcm06IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHsKICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5nZXRTdG9yZSgiYWNjZXNzVG9rZW4iKQogICAgICB9OwogICAgICB0aGlzLmRlcGxveUJ5RmlsZVVybCA9IGRlcGxveUJ5RmlsZTsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICB0aGlzLmluaXRDYXRlZ29yeVRyZWVEYXRhKCk7CiAgICAgIHRoaXMuZ2V0RGljdERhdGFUeXBlKCk7CiAgICB9LAogICAgZ2V0RGljdERhdGFUeXBlKCkgewogICAgICBnZXREaWN0RGF0YUJ5VHlwZSgiYnVzaW5lc3NfdGFibGUiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmRpY3RUYWJsZSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZ2V0RGljdERhdGFCeVR5cGUoImJ1c2luZXNzX2Zvcm0iKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmRpY3RGb3JtID0gcmVzLnJlc3VsdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbmRlckNvbnRlbnQoaCwgeyByb290LCBub2RlLCBkYXRhIH0pIHsKICAgICAgbGV0IGljb24gPSAiIjsKICAgICAgaWYgKGRhdGEudHlwZSA9PSAiMCIpIHsKICAgICAgICBpY29uID0gIm1kLWZvbGRlci1vcGVuIjsKICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gIjEiKSB7CiAgICAgICAgaWNvbiA9ICJpb3MtYm9va21hcmstb3V0bGluZSI7CiAgICAgIH0KICAgICAgcmV0dXJuIGgoCiAgICAgICAgInNwYW4iLAogICAgICAgIHsKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgIGRpc3BsYXk6ICJpbmxpbmUtYmxvY2siLAogICAgICAgICAgICBjdXJzb3I6ICJwb2ludGVyIgogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUcmVlKGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBbCiAgICAgICAgICBoKCJzcGFuIiwgWwogICAgICAgICAgICBoKCJJY29uIiwgewogICAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBpY29uLAogICAgICAgICAgICAgICAgc2l6ZTogIjE2IgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICJtYXJnaW4tcmlnaHQiOiAiOHB4IiwKICAgICAgICAgICAgICAgICJtYXJnaW4tYm90dG9tIjogIjNweCIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBoKCJzcGFuIiwgZGF0YS50aXRsZSkKICAgICAgICAgIF0pCiAgICAgICAgXQogICAgICApOwogICAgfSwKICAgIGluaXRDYXRlZ29yeVRyZWVEYXRhKCkgewogICAgICBpbml0QWN0Q2F0ZWdvcnkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsKICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGF0YUNhdCA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkRGF0YVRyZWUoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgbG9hZEFjdENhdGVnb3J5KGl0ZW0uaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgewogICAgICAgICAgICAgIGUudGl0bGUgPSAiW+W3suemgeeUqF0gIiArIGUudGl0bGU7CiAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgY2FsbGJhY2socmVzLnJlc3VsdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hDYXQoKSB7CiAgICAgIC8vIOaQnOe0oumDqOmXqAogICAgICBpZiAodGhpcy5zZWFyY2hLZXkpIHsKICAgICAgICB0aGlzLmNhdExvYWRpbmcgPSB0cnVlOwogICAgICAgIHNlYXJjaEFjdENhdGVnb3J5KHsgdGl0bGU6IHRoaXMuc2VhcmNoS2V5IH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuY2F0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5kYXRhQ2F0ID0gcmVzLnJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluaXRDYXRlZ29yeVRyZWVEYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RUcmVlKHYpIHsKICAgICAgaWYgKHYpIHsKICAgICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsKICAgICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgaWYgKGRhdGEudHlwZSA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuivt+mAieaLqeS4gOS4quexu+WIqyIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlJZCA9IGRhdGEuaWQ7CiAgICAgICAgdGhpcy5jYXRlZ29yeVRpdGxlID0gZGF0YS50aXRsZTsKICAgICAgfQogICAgfSwKICAgIGNsZWFyU2VsZWN0Q2F0KCkgewogICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlJZCA9ICIiOwogICAgICB0aGlzLmNhdGVnb3J5VGl0bGUgPSAiIjsKICAgIH0sCiAgICBjaGFuZ2VQYWdlKHYpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSB2OwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3RBbGwoKTsKICAgIH0sCiAgICBjaGFuZ2VQYWdlU2l6ZSh2KSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICBzZWxlY3REYXRlUmFuZ2UodikgewogICAgICBpZiAodikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5zdGFydERhdGUgPSB2WzBdOwogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5lbmREYXRlID0gdlsxXTsKICAgICAgfQogICAgfSwKICAgIGdldERhdGFMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRQcm9jZXNzRGF0YUxpc3QodGhpcy5zZWFyY2hGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmRhdGEgPSByZXMucmVzdWx0LmNvbnRlbnQ7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VhcmNoKCkgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEwOwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlUmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2VhcmNoRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEwOwogICAgICB0aGlzLnNlbGVjdERhdGUgPSBudWxsOwogICAgICB0aGlzLnNlYXJjaEZvcm0uc3RhcnREYXRlID0gIiI7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5lbmREYXRlID0gIiI7CiAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNrgogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgY2hhbmdlU29ydChlKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5zb3J0ID0gZS5rZXk7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5vcmRlciA9IGUub3JkZXI7CiAgICAgIGlmIChlLm9yZGVyID09ICJub3JtYWwiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gIiI7CiAgICAgIH0KICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIGRlcGxveSh2KSB7CiAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7CiAgICAgIHRoaXMuJE5vdGljZS53YXJuaW5nKHsKICAgICAgICB0aXRsZTogIuS4jeaUr+aMgeeahOaWh+S7tuagvOW8jyIsCiAgICAgICAgZGVzYzoKICAgICAgICAgICLmiYDpgInmlofku7bigJggIiArCiAgICAgICAgICBmaWxlLm5hbWUgKwogICAgICAgICAgIiDigJnmoLzlvI/kuI3mraPnoa4sIOivt+mAieaLqSAuemlwIC5iYXIgLmJwbW4gLmJwbW4yMC54bWzmoLzlvI/mlofku7YiCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU1heFNpemUoZmlsZSkgewogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7CiAgICAgICAgdGl0bGU6ICLmlofku7blpKflsI/ov4flpKciLAogICAgICAgIGRlc2M6ICLmiYDpgInmlofku7bigJggIiArIGZpbGUubmFtZSArICIg4oCZ5aSn5bCP6L+H5aSnLCDkuI3lvpfotoXov4cgNU0uIgogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIumDqOe9suaIkOWKn++8jOivt+e7p+e7ree8lui+keWujOWWhOa1geeoi+S/oeaBryIpOwogICAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3IoZXJyb3IsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7CiAgICB9LAogICAgZWRpdCh2KSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOwogICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7CiAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICB0aGlzLmZvcm0gPSBkYXRhOwogICAgICB0aGlzLmNhdGVnb3J5VGl0bGUgPSBkYXRhLmNhdGVnb3J5VGl0bGU7CiAgICAgIHRoaXMuZWRpdE1vZGFsVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgZWRpdE5vZGUodikgewogICAgICBsZXQgcXVlcnkgPSB7IGlkOiB2LmlkLCBuYW1lOiB2Lm5hbWUsIGJhY2tSb3V0ZTogdGhpcy4kcm91dGUubmFtZSB9OwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogInByb2Nlc3Nfbm9kZV9lZGl0IiwKICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGVsU3VibWl0RWRpdCgpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgICAgICAgICB1cGRhdGVJbmZvKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kYWxWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZWRpdFN0YXR1cyhzdGF0dXMsIHYpIHsKICAgICAgbGV0IG9wZXJhdGlvbiA9ICIiOwogICAgICBpZiAoc3RhdHVzID09IDApIHsKICAgICAgICBvcGVyYXRpb24gPSAi5pqC5YGc5oyC6LW3IjsKICAgICAgfSBlbHNlIHsKICAgICAgICBvcGVyYXRpb24gPSAi5r+A5rS76L+Q6KGMIjsKICAgICAgfQogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupCIgKyBvcGVyYXRpb24sCiAgICAgICAgY29udGVudDogYOaCqOehruiupOimgSR7b3BlcmF0aW9ufea1geeoiyR7di5uYW1lfT9gLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgb25PazogKCkgPT4gewogICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsCiAgICAgICAgICAgIGlkOiB2LmlkCiAgICAgICAgICB9OwogICAgICAgICAgdXBkYXRlU3RhdHVzKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRNb2RhbC5yZW1vdmUoKTsKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY29udmVydCh2KSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICLnoa7orqTovazljJYiLAogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHovazljJbmtYHnqIsgIiArIHYubmFtZSArICIg5Li65qih5Z6LPyIsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBvbk9rOiAoKSA9PiB7CiAgICAgICAgICBjb252ZXJ0VG9Nb2RlbCh2LmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhhdC5zaG93SnVtcCgpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2hvd0p1bXAoKSB7CiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAi6L2s5YyW5oiQ5YqfIiwKICAgICAgICBjb250ZW50OiAi5piv5ZCm56uL5Y2z6Lez6L2s5p+l55yL6K+l5qih5Z6LPyIsCiAgICAgICAgb25PazogKCkgPT4gewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAibW9kZWwtbWFuYWdlIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzaG93UmVzb3VyY2UodHlwZSwgdikgewogICAgICBpZiAodHlwZSA9PSAwKSB7CiAgICAgICAgd2luZG93Lm9wZW4oCiAgICAgICAgICBgJHtleHBvcnRSZXNvdXJjZX0/aWQ9JHsKICAgICAgICAgICAgdi5pZAogICAgICAgICAgfSZ0eXBlPSR7dHlwZX0mYWNjZXNzVG9rZW49JHt0aGlzLmdldFN0b3JlKCJhY2Nlc3NUb2tlbiIpfWAKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gMSkgewogICAgICAgIHRoaXMudmlld1RpdGxlID0gIua1geeoi+WbvueJh+mihOiniCgiICsgdi5kaWFncmFtTmFtZSArICIpIjsKICAgICAgICB0aGlzLmRpYWdyYW1VcmwgPSBgJHtleHBvcnRSZXNvdXJjZX0/aWQ9JHsKICAgICAgICAgIHYuaWQKICAgICAgICB9JnR5cGU9JHt0eXBlfSZhY2Nlc3NUb2tlbj0ke3RoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIil9YDsKICAgICAgICB0aGlzLnZpZXdJbWFnZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmUodikgewogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWIoOmZpOa1geeoiyAiICsgdi5uYW1lICsgIiA/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgIGRlbGV0ZVByb2Nlc3Modi5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRNb2RhbC5yZW1vdmUoKTsKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2hvd1NlbGVjdChlKSB7CiAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IGU7CiAgICAgIHRoaXMuc2VsZWN0Q291bnQgPSBlLmxlbmd0aDsKICAgIH0sCiAgICBjbGVhclNlbGVjdEFsbCgpIHsKICAgICAgdGhpcy4kcmVmcy50YWJsZS5zZWxlY3RBbGwoZmFsc2UpOwogICAgfSwKICAgIGRlbEFsbCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0Q291bnQgPD0gMCkgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5oKo6L+Y5pyq6YCJ5oup6KaB5Yig6Zmk55qE5pWw5o2uIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAi56Gu6K6k5Yig6ZmkIiwKICAgICAgICBjb250ZW50OiAi5oKo56Gu6K6k6KaB5Yig6Zmk5omA6YCJ55qEICIgKyB0aGlzLnNlbGVjdENvdW50ICsgIiDmnaHmlbDmja4/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgIGxldCBpZHMgPSAiIjsKICAgICAgICAgIHRoaXMuc2VsZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOwogICAgICAgICAgZGVsZXRlUHJvY2VzcyhpZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdEFsbCgpOwogICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJYKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZiAodG8ubmFtZSA9PSAicHJvY2Vzcy1tYW5hZ2UiKSB7CiAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["processManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"processManage.vue","sourceRoot":"src/views/activiti/process-manage","sourcesContent":["<style lang=\"less\">\n@import \"../../../styles/table-common.less\";\n@import \"./processManage.less\";\n</style>\n<template>\n  <div class=\"search\">\n    <Card>\n      <Row v-show=\"openSearch\" @keydown.enter.native=\"handleSearch\">\n        <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"70\">\n          <Form-item label=\"流程名称\" prop=\"name\">\n            <Input\n              type=\"text\"\n              v-model=\"searchForm.name\"\n              placeholder=\"请输入名称\"\n              clearable\n              style=\"width: 200px\"\n            />\n          </Form-item>\n          <Form-item label=\"标识Key\" prop=\"processKey\">\n            <Input\n              type=\"text\"\n              v-model=\"searchForm.processKey\"\n              placeholder=\"请输入标识\"\n              clearable\n              style=\"width: 200px\"\n            />\n          </Form-item>\n          <Form-item label=\"部署时间\">\n            <DatePicker\n              v-model=\"selectDate\"\n              type=\"daterange\"\n              format=\"yyyy-MM-dd\"\n              clearable\n              @on-change=\"selectDateRange\"\n              placeholder=\"选择起始时间\"\n              style=\"width: 200px\"\n            ></DatePicker>\n          </Form-item>\n          <Form-item style=\"margin-left:-35px;\" class=\"br\">\n            <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\">搜索</Button>\n            <Button @click=\"handleReset\">重置</Button>\n          </Form-item>\n        </Form>\n      </Row>\n      <Row class=\"operation\">\n        <Button @click=\"deploy\" type=\"primary\" icon=\"md-cloud-upload\">部署流程文件</Button>\n        <Button @click=\"delAll\" icon=\"md-trash\">批量删除</Button>\n        <Button @click=\"getDataList\" icon=\"md-refresh\">刷新</Button>\n        <i-switch\n          size=\"large\"\n          v-model=\"searchForm.showLatest\"\n          @on-change=\"getDataList\"\n          style=\"margin:0 5px\"\n        >\n          <span slot=\"open\">最新</span>\n          <span slot=\"close\">全部</span>\n        </i-switch>\n        <Button type=\"dashed\" @click=\"openSearch=!openSearch\">{{openSearch ? \"关闭搜索\" : \"开启搜索\"}}</Button>\n        <Button type=\"dashed\" @click=\"openTip=!openTip\">{{openTip ? \"关闭提示\" : \"开启提示\"}}</Button>\n      </Row>\n      <Row v-show=\"openTip\">\n        <Alert show-icon>\n          已选择\n          <span class=\"select-count\">{{selectCount}}</span> 项\n          <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\n          <span style=\"margin-left:20px\">说明：当有多个相同标识的流程时，默认仅显示其最新版本</span>\n        </Alert>\n      </Row>\n      <Row>\n        <Table\n          :loading=\"loading\"\n          border\n          :columns=\"columns\"\n          :data=\"data\"\n          sortable=\"custom\"\n          @on-sort-change=\"changeSort\"\n          @on-selection-change=\"showSelect\"\n          ref=\"table\"\n        ></Table>\n      </Row>\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\n        <Page\n          :current=\"searchForm.pageNumber\"\n          :total=\"total\"\n          :page-size=\"searchForm.pageSize\"\n          @on-change=\"changePage\"\n          @on-page-size-change=\"changePageSize\"\n          :page-size-opts=\"[10,20,50]\"\n          size=\"small\"\n          show-total\n          show-elevator\n          show-sizer\n        ></Page>\n      </Row>\n    </Card>\n\n    <!-- 部署流程文件 -->\n    <Modal title=\"部署流程文件\" footer-hide v-model=\"modalVisible\" :mask-closable=\"false\" :width=\"500\">\n      <Upload\n        :action=\"deployByFileUrl\"\n        :headers=\"accessToken\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :format=\"['zip','bar','bpmn','xml']\"\n        :max-size=\"5120\"\n        :on-format-error=\"handleFormatError\"\n        :on-exceeded-size=\"handleMaxSize\"\n        type=\"drag\"\n        ref=\"up\"\n      >\n        <div style=\"padding: 20px 0\">\n          <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n          <p>点击这里或将文件拖拽到这里上传</p>请选择BPMN文件，仅支持zip、bpmn20.xml、bar、bpmn格式文件\n        </div>\n      </Upload>\n    </Modal>\n    <!-- 编辑分类或备注 -->\n    <Modal title=\"编辑流程信息\" v-model=\"editModalVisible\" :mask-closable=\"false\" :width=\"500\">\n      <Form ref=\"form\" :model=\"form\" :label-width=\"110\" :rules=\"formValidate\">\n        <FormItem label=\"流程分类\">\n          <div style=\"display:flex;\">\n            <Input\n              v-model=\"categoryTitle\"\n              readonly\n              clearable\n              @on-clear=\"clearSelectCat\"\n              style=\"margin-right:10px;\"\n            />\n            <Poptip trigger=\"click\" placement=\"right\" title=\"选择类别\" width=\"250\">\n              <Button icon=\"md-list\">选择分类</Button>\n              <div slot=\"content\">\n                <Input\n                  v-model=\"searchKey\"\n                  suffix=\"ios-search\"\n                  @on-change=\"searchCat\"\n                  placeholder=\"输入分类名搜索\"\n                  clearable\n                />\n                <div class=\"tree-list\">\n                  <Tree\n                    :data=\"dataCat\"\n                    :load-data=\"loadDataTree\"\n                    :render=\"renderContent\"\n                    @on-select-change=\"selectTree\"\n                  ></Tree>\n                  <Spin size=\"large\" fix v-if=\"catLoading\"></Spin>\n                </div>\n              </div>\n            </Poptip>\n          </div>\n        </FormItem>\n        <FormItem label=\"关联表单路由\" prop=\"routeName\">\n          <Select v-model=\"form.routeName\" placeholder=\"请选择关联业务表单前端路由名\" clearable>\n            <Option v-for=\"(item, i) in dictForm\" :key=\"i\" :value=\"item.value\" :label=\"item.title\">\n              <span style=\"margin-right:10px;\">{{ item.title }}</span>\n              <span style=\"color:#ccc;\">{{ item.value }}</span>\n            </Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"关联业务表\" prop=\"businessTable\">\n          <Select v-model=\"form.businessTable\" placeholder=\"请选择关联数据库业务表\" clearable>\n            <Option v-for=\"(item, i) in dictTable\" :key=\"i\" :value=\"item.value\" :label=\"item.title\">\n              <span style=\"margin-right:10px;\">{{ item.title }}</span>\n              <span style=\"color:#ccc;\">{{ item.value }}</span>\n            </Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"备注描述\" prop=\"description\">\n          <Input v-model=\"form.description\" />\n        </FormItem>\n      </Form>\n      <div slot=\"footer\">\n        <Button type=\"text\" @click=\"editModalVisible=false\">取消</Button>\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handelSubmitEdit\">提交</Button>\n      </div>\n    </Modal>\n    <!-- 图片预览 -->\n    <Modal :title=\"viewTitle\" v-model=\"viewImage\" draggable width=\"800\">\n      <img :src=\"diagramUrl\" alt=\"无效的图片链接\" style=\"width: 100%;margin: 0 auto;display: block;\" />\n      <div slot=\"footer\">\n        <Button @click=\"viewImage=false\" style=\"margin-right:5px\">关闭</Button>\n        <Button :to=\"diagramUrl\" target=\"_blank\" type=\"primary\">下载</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport {\n  getProcessDataList,\n  updateInfo,\n  updateStatus,\n  deployByFile,\n  exportResource,\n  convertToModel,\n  deleteProcess,\n  initActCategory,\n  loadActCategory,\n  searchActCategory\n} from \"@/api/activiti\";\nimport { getDictDataByType } from \"@/api/index\";\n\nexport default {\n  name: \"process-manage\",\n\n  data() {\n    return {\n      openSearch: true,\n      openTip: true,\n      accessToken: {},\n      deployByFileUrl: \"\",\n      loading: true, // 表单加载状态\n      selectCount: 0, // 多选计数\n      selectList: [], // 多选数据\n      viewImage: false,\n      viewTitle: \"流程图片预览\",\n      diagramUrl: \"\",\n      searchForm: {\n        // 搜索框对应data对象\n        showLatest: true,\n        name: \"\",\n        processKey: \"\",\n        status: \"\",\n        pageNumber: 1, // 当前页数\n        pageSize: 10, // 页面大小\n        sort: \"createTime\", // 默认排序字段\n        order: \"desc\", // 默认排序方式\n        startDate: \"\", // 起始时间\n        endDate: \"\" // 终止时间\n      },\n      selectDate: null, // 选择日期绑定modal\n      modalVisible: false,\n      editModalVisible: false,\n      dataCat: [],\n      catLoading: false,\n      searchKey: \"\",\n      form: {\n        routeName: \"\",\n        businessTable: \"\",\n        description: \"\"\n      },\n      formValidate: {\n        routeName: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\n        businessTable: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" }\n        ]\n      },\n      categoryTitle: \"\",\n      submitLoading: false, // 添加或编辑提交状态\n      columns: [\n        // 表头\n        {\n          type: \"selection\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          type: \"index\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"名称\",\n          key: \"name\",\n          minWidth: 150,\n          sortable: true\n        },\n        {\n          title: \"标识Key\",\n          key: \"processKey\",\n          width: 130,\n          sortable: true\n        },\n        {\n          title: \"版本\",\n          key: \"version\",\n          width: 90,\n          align: \"center\",\n          sortable: true,\n          render: (h, params) => {\n            let re = \"\";\n            if (params.row.version) {\n              re = \"v.\" + params.row.version;\n            }\n            return h(\"div\", re);\n          }\n        },\n        {\n          title: \"流程图片\",\n          key: \"diagramName\",\n          width: 160,\n          sortable: true,\n          render: (h, params) => {\n            return h(\"div\", [\n              h(\n                \"a\",\n                {\n                  on: {\n                    click: () => {\n                      this.showResource(1, params.row);\n                    }\n                  }\n                },\n                params.row.diagramName\n              )\n            ]);\n          }\n        },\n        {\n          title: \"流程XML\",\n          key: \"xmlName\",\n          width: 160,\n          sortable: true,\n          render: (h, params) => {\n            return h(\"div\", [\n              h(\n                \"a\",\n                {\n                  on: {\n                    click: () => {\n                      this.showResource(0, params.row);\n                    }\n                  }\n                },\n                params.row.xmlName\n              )\n            ]);\n          }\n        },\n        {\n          title: \"关联表单路由名\",\n          key: \"routeName\",\n          width: 160,\n          sortable: true,\n          render: (h, params) => {\n            let re = \"\";\n            this.dictForm.forEach(e => {\n              if (e.value == params.row.routeName) {\n                re = `${e.title} (${e.value})`;\n              }\n            });\n            return h(\"div\", re);\n          }\n        },\n        {\n          title: \"数据库业务表\",\n          key: \"businessTable\",\n          width: 170,\n          sortable: true,\n          render: (h, params) => {\n            let re = \"\";\n            this.dictTable.forEach(e => {\n              if (e.value == params.row.businessTable) {\n                re = `${e.title} (${e.value})`;\n              }\n            });\n            return h(\"div\", re);\n          }\n        },\n        {\n          title: \"所属分类\",\n          key: \"categoryTitle\",\n          width: 130,\n          sortable: true\n        },\n        {\n          title: \"状态\",\n          key: \"status\",\n          align: \"center\",\n          width: 130,\n          render: (h, params) => {\n            if (params.row.status == 1) {\n              return h(\"div\", [\n                h(\"Badge\", {\n                  props: {\n                    status: \"success\",\n                    text: \"已激活\"\n                  }\n                })\n              ]);\n            } else if (params.row.status == 0) {\n              return h(\"div\", [\n                h(\"Badge\", {\n                  props: {\n                    status: \"error\",\n                    text: \"已挂起\"\n                  }\n                })\n              ]);\n            }\n          },\n          filters: [\n            {\n              label: \"已激活\",\n              value: 1\n            },\n            {\n              label: \"已挂起\",\n              value: 0\n            }\n          ],\n          filterMultiple: false,\n          filterMethod(value, row) {\n            if (value == 0) {\n              return row.status == 0;\n            } else if (value == 1) {\n              return row.status == 1;\n            }\n          }\n        },\n        {\n          title: \"备注描述\",\n          key: \"description\",\n          width: 150,\n          sortable: true\n        },\n        {\n          title: \"部署时间\",\n          key: \"createTime\",\n          width: 180,\n          sortable: true,\n          sortType: \"desc\"\n        },\n        {\n          title: \"更新时间\",\n          key: \"updateTime\",\n          width: 180,\n          sortable: true\n        },\n        {\n          title: \"操作\",\n          key: \"action\",\n          width: 365,\n          align: \"center\",\n          fixed: \"right\",\n          render: (h, params) => {\n            let suspendOrActive = \"\";\n            if (params.row.status == 0) {\n              // 挂起可激活\n              suspendOrActive = h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"success\",\n                    size: \"small\",\n                    icon: \"md-play\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.editStatus(1, params.row);\n                    }\n                  }\n                },\n                \"激活\"\n              );\n            } else {\n              // 激活可挂起\n              suspendOrActive = h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"warning\",\n                    size: \"small\",\n                    icon: \"md-pause\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.editStatus(0, params.row);\n                    }\n                  }\n                },\n                \"挂起\"\n              );\n            }\n            return h(\"div\", [\n              suspendOrActive,\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"primary\",\n                    size: \"small\",\n                    icon: \"logo-buffer\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.editNode(params.row);\n                    }\n                  }\n                },\n                \"节点设置\"\n              ),\n              h(\n                \"Button\",\n                {\n                  props: {\n                    size: \"small\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.edit(params.row);\n                    }\n                  }\n                },\n                \"编辑\"\n              ),\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"info\",\n                    size: \"small\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.convert(params.row);\n                    }\n                  }\n                },\n                \"转模型\"\n              ),\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"error\",\n                    size: \"small\"\n                  },\n                  on: {\n                    click: () => {\n                      this.remove(params.row);\n                    }\n                  }\n                },\n                \"删除\"\n              )\n            ]);\n          }\n        }\n      ],\n      data: [], // 表单数据\n      total: 0, // 表单数据总数\n      dictTable: [],\n      dictForm: []\n    };\n  },\n  methods: {\n    init() {\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n      this.deployByFileUrl = deployByFile;\n      this.getDataList();\n      this.initCategoryTreeData();\n      this.getDictDataType();\n    },\n    getDictDataType() {\n      getDictDataByType(\"business_table\").then(res => {\n        if (res.success) {\n          this.dictTable = res.result;\n        }\n      });\n      getDictDataByType(\"business_form\").then(res => {\n        if (res.success) {\n          this.dictForm = res.result;\n        }\n      });\n    },\n    renderContent(h, { root, node, data }) {\n      let icon = \"\";\n      if (data.type == \"0\") {\n        icon = \"md-folder-open\";\n      } else if (data.type == \"1\") {\n        icon = \"ios-bookmark-outline\";\n      }\n      return h(\n        \"span\",\n        {\n          style: {\n            display: \"inline-block\",\n            cursor: \"pointer\"\n          },\n          on: {\n            click: () => {\n              this.selectTree(data);\n            }\n          }\n        },\n        [\n          h(\"span\", [\n            h(\"Icon\", {\n              props: {\n                type: icon,\n                size: \"16\"\n              },\n              style: {\n                \"margin-right\": \"8px\",\n                \"margin-bottom\": \"3px\"\n              }\n            }),\n            h(\"span\", data.title)\n          ])\n        ]\n      );\n    },\n    initCategoryTreeData() {\n      initActCategory().then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          this.dataCat = res.result;\n        }\n      });\n    },\n    loadDataTree(item, callback) {\n      loadActCategory(item.id).then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          callback(res.result);\n        }\n      });\n    },\n    searchCat() {\n      // 搜索部门\n      if (this.searchKey) {\n        this.catLoading = true;\n        searchActCategory({ title: this.searchKey }).then(res => {\n          this.catLoading = false;\n          if (res.success) {\n            res.result.forEach(function(e) {\n              if (e.status == -1) {\n                e.title = \"[已禁用] \" + e.title;\n                e.disabled = true;\n              }\n            });\n            this.dataCat = res.result;\n          }\n        });\n      } else {\n        this.initCategoryTreeData();\n      }\n    },\n    selectTree(v) {\n      if (v) {\n        // 转换null为\"\"\n        for (let attr in v) {\n          if (v[attr] == null) {\n            v[attr] = \"\";\n          }\n        }\n        let str = JSON.stringify(v);\n        let data = JSON.parse(str);\n        if (data.type == 0) {\n          this.$Message.warning(\"请选择一个类别\");\n          return;\n        }\n        this.form.categoryId = data.id;\n        this.categoryTitle = data.title;\n      }\n    },\n    clearSelectCat() {\n      this.form.categoryId = \"\";\n      this.categoryTitle = \"\";\n    },\n    changePage(v) {\n      this.searchForm.pageNumber = v;\n      this.getDataList();\n      this.clearSelectAll();\n    },\n    changePageSize(v) {\n      this.searchForm.pageSize = v;\n      this.getDataList();\n    },\n    selectDateRange(v) {\n      if (v) {\n        this.searchForm.startDate = v[0];\n        this.searchForm.endDate = v[1];\n      }\n    },\n    getDataList() {\n      this.loading = true;\n      getProcessDataList(this.searchForm).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.data = res.result.content;\n          this.total = res.result.totalElements;\n        }\n      });\n    },\n    handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getDataList();\n    },\n    handleReset() {\n      this.$refs.searchForm.resetFields();\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.selectDate = null;\n      this.searchForm.startDate = \"\";\n      this.searchForm.endDate = \"\";\n      // 重新加载数据\n      this.getDataList();\n    },\n    changeSort(e) {\n      this.searchForm.sort = e.key;\n      this.searchForm.order = e.order;\n      if (e.order == \"normal\") {\n        this.searchForm.order = \"\";\n      }\n      this.getDataList();\n    },\n    deploy(v) {\n      this.modalVisible = true;\n    },\n    handleFormatError(file) {\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc:\n          \"所选文件‘ \" +\n          file.name +\n          \" ’格式不正确, 请选择 .zip .bar .bpmn .bpmn20.xml格式文件\"\n      });\n    },\n    handleMaxSize(file) {\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    handleSuccess(res, file) {\n      if (res.success) {\n        this.$Message.success(\"部署成功，请继续编辑完善流程信息\");\n        this.modalVisible = false;\n        this.getDataList();\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError(error, file, fileList) {\n      this.$Message.error(error.toString());\n    },\n    edit(v) {\n      this.$refs.form.resetFields();\n      // 转换null为\"\"\n      for (let attr in v) {\n        if (v[attr] == null) {\n          v[attr] = \"\";\n        }\n      }\n      let str = JSON.stringify(v);\n      let data = JSON.parse(str);\n      this.form = data;\n      this.categoryTitle = data.categoryTitle;\n      this.editModalVisible = true;\n    },\n    editNode(v) {\n      let query = { id: v.id, name: v.name, backRoute: this.$route.name };\n      this.$router.push({\n        name: \"process_node_edit\",\n        query: query\n      });\n    },\n    handelSubmitEdit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.submitLoading = true;\n          updateInfo(this.form).then(res => {\n            this.submitLoading = false;\n            if (res.success) {\n              this.$Message.success(\"操作成功\");\n              this.getDataList();\n              this.editModalVisible = false;\n            }\n          });\n        }\n      });\n    },\n    editStatus(status, v) {\n      let operation = \"\";\n      if (status == 0) {\n        operation = \"暂停挂起\";\n      } else {\n        operation = \"激活运行\";\n      }\n      this.$Modal.confirm({\n        title: \"确认\" + operation,\n        content: `您确认要${operation}流程${v.name}?`,\n        loading: true,\n        onOk: () => {\n          let params = {\n            status: status,\n            id: v.id\n          };\n          updateStatus(params).then(res => {\n            this.$Modal.remove();\n            if (res.success) {\n              this.$Message.success(\"操作成功\");\n              this.getDataList();\n            }\n          });\n        }\n      });\n    },\n    convert(v) {\n      let that = this;\n      this.$Modal.confirm({\n        title: \"确认转化\",\n        content: \"您确认要转化流程 \" + v.name + \" 为模型?\",\n        loading: true,\n        onOk: () => {\n          convertToModel(v.id).then(res => {\n            this.$Modal.remove();\n            if (res.success) {\n              setTimeout(function() {\n                that.showJump();\n              }, 300);\n            }\n          });\n        }\n      });\n    },\n    showJump() {\n      this.$Modal.confirm({\n        title: \"转化成功\",\n        content: \"是否立即跳转查看该模型?\",\n        onOk: () => {\n          this.$router.push({\n            name: \"model-manage\"\n          });\n        }\n      });\n    },\n    showResource(type, v) {\n      if (type == 0) {\n        window.open(\n          `${exportResource}?id=${\n            v.id\n          }&type=${type}&accessToken=${this.getStore(\"accessToken\")}`\n        );\n      } else if (type == 1) {\n        this.viewTitle = \"流程图片预览(\" + v.diagramName + \")\";\n        this.diagramUrl = `${exportResource}?id=${\n          v.id\n        }&type=${type}&accessToken=${this.getStore(\"accessToken\")}`;\n        this.viewImage = true;\n      }\n    },\n    remove(v) {\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除流程 \" + v.name + \" ?\",\n        loading: true,\n        onOk: () => {\n          deleteProcess(v.id).then(res => {\n            this.$Modal.remove();\n            if (res.success) {\n              this.$Message.success(\"操作成功\");\n              this.getDataList();\n            }\n          });\n        }\n      });\n    },\n    showSelect(e) {\n      this.selectList = e;\n      this.selectCount = e.length;\n    },\n    clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    delAll() {\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要删除的数据\");\n        return;\n      }\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\n        loading: true,\n        onOk: () => {\n          let ids = \"\";\n          this.selectList.forEach(function(e) {\n            ids += e.id + \",\";\n          });\n          ids = ids.substring(0, ids.length - 1);\n          deleteProcess(ids).then(res => {\n            this.$Modal.remove();\n            if (res.success) {\n              this.$Message.success(\"操作成功\");\n              this.clearSelectAll();\n              this.getDataList();\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n    // 监听路由变化\n    $route(to, from) {\n      if (to.name == \"process-manage\") {\n        this.getDataList();\n      }\n    }\n  }\n};\n</script>"]}]}