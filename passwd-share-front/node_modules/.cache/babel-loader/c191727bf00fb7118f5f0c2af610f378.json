{"remainingRequest":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/babel-loader/lib/index.js!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/sys/message-manage/addOrEditMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/src/views/sys/message-manage/addOrEditMessage.vue","mtime":1579164402616},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daiv/files/GitProjects/passwdShare/passwd-share-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0TWVzc2FnZURhdGFCeUlkLCBhZGRNZXNzYWdlLCBlZGl0TWVzc2FnZSB9IGZyb20gIkAvYXBpL2luZGV4IjsKaW1wb3J0IGVkaXRvciBmcm9tICJAL3ZpZXdzL215LWNvbXBvbmVudHMvc2hhcmUvZWRpdG9yIjsKaW1wb3J0IHVzZXJDaG9vc2UgZnJvbSAiQC92aWV3cy9teS1jb21wb25lbnRzL3NoYXJlL3VzZXItY2hvb3NlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhZGRfZWRpdF9tZXNzYWdlIiwKICBjb21wb25lbnRzOiB7CiAgICB1c2VyQ2hvb3NlOiB1c2VyQ2hvb3NlLAogICAgZWRpdG9yOiBlZGl0b3IKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g6KGo5Y2V5Yqg6L2954q25oCBCiAgICAgIHNlbGVjdFVzZXJzOiBbXSwKICAgICAgdXNlck1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIG1vZGFsVGl0bGU6ICIiLAogICAgICAvLyDmt7vliqDmiJbnvJbovpHmoIfpopgKICAgICAgZm9ybTogewogICAgICAgIC8vIOa3u+WKoOaIlue8lui+keihqOWNleWvueixoeWIneWni+WMluaVsOaNrgogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICByYW5nZTogMAogICAgICB9LAogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICAvLyDooajljZXpqozor4Hop4TliJkKICAgICAgICB0eXBlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5raI5oGv57G75Z6L5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5qCH6aKY5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGNvbnRlbnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLlhoXlrrnkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOa3u+WKoOaIlue8lui+keaPkOS6pOeKtuaAgQogICAgICBkaWN0TWVzc2FnZVR5cGU6IHRoaXMuJHN0b3JlLnN0YXRlLmRpY3QubWVzc2FnZVR5cGUsCiAgICAgIGJhY2tSb3V0ZTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwogICAgICB0aGlzLmJhY2tSb3V0ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmJhY2tSb3V0ZTsKCiAgICAgIGlmICh0aGlzLnR5cGUgPT0gMSkgewogICAgICAgIHRoaXMuZm9ybS5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGdldE1lc3NhZ2VEYXRhQnlJZCh0aGlzLmZvcm0uaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgICAgIHZhciB2ID0gcmVzLnJlc3VsdDsKCiAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIHYpIHsKICAgICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzdHIgPSBKU09OLnN0cmluZ2lmeSh2KTsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICAgICAgX3RoaXMuZm9ybSA9IGRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kZWxTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRlbFN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczIuc3VibWl0TG9hZGluZyA9IHRydWU7CgogICAgICAgICAgaWYgKF90aGlzMi50eXBlID09IDApIHsKICAgICAgICAgICAgLy8g5re75YqgIOmBv+WFjee8lui+keWQjuS8oOWFpWlk562J5pWw5o2uIOiusOW+l+WIoOmZpAogICAgICAgICAgICBkZWxldGUgX3RoaXMyLmZvcm0uaWQ7IC8vIOeUqOaIt2lk5pWw5o2uCgogICAgICAgICAgICB2YXIgaWRzID0gW107CgogICAgICAgICAgICBfdGhpczIuc2VsZWN0VXNlcnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlkcyArPSBlLmlkICsgIiwiOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczIuZm9ybS51c2VySWRzID0gaWRzOwogICAgICAgICAgICBhZGRNZXNzYWdlKF90aGlzMi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczIuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIF90aGlzMi4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi50eXBlID09IDEpIHsKICAgICAgICAgICAgLy8g57yW6L6RCiAgICAgICAgICAgIGVkaXRNZXNzYWdlKF90aGlzMi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczIuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIF90aGlzMi4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RVc2VyOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RVc2VyKHYpIHsKICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IHY7CiAgICB9LAogICAgaGFuZGVsQ2FuY2VsOiBmdW5jdGlvbiBoYW5kZWxDYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgfSwKICAgIC8vIOWFs+mXreW9k+WJjemhtemdogogICAgY2xvc2VDdXJyZW50UGFnZTogZnVuY3Rpb24gY2xvc2VDdXJyZW50UGFnZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVUYWciLCAiYWRkX2VkaXRfbWVzc2FnZSIpOwogICAgICBsb2NhbFN0b3JhZ2UucGFnZU9wZW5lZExpc3QgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5hcHAucGFnZU9wZW5lZExpc3QpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogdGhpcy5iYWNrUm91dGUKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyWCiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZiAodG8ubmFtZSA9PSAiYWRkX2VkaXRfbWVzc2FnZSIpIHsKICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwoKICAgICAgICBpZiAodGhpcy50eXBlID09IDEpIHsKICAgICAgICAgIHRoaXMuZm9ybS5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["addOrEditMessage.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\">\n@import \"./messageManage.less\";\n</style>\n<template>\n  <div>\n    <Card>\n      <p slot=\"title\">\n        <span v-if=\"type==0\">发送新消息</span>\n        <span v-else>编辑消息</span>\n      </p>\n      <Row>\n        <Form\n          ref=\"form\"\n          :model=\"form\"\n          :label-width=\"90\"\n          :rules=\"formValidate\"\n          style=\"position:relative\"\n        >\n          <FormItem label=\"消息类型\" prop=\"type\">\n            <Select v-model=\"form.type\" placeholder=\"请选择\" style=\"width:250px\">\n              <Option\n                v-for=\"(item, i) in dictMessageType\"\n                :key=\"i\"\n                :value=\"item.value\"\n              >{{item.title}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem label=\"标题\" prop=\"title\">\n            <Input v-model=\"form.title\" style=\"width:600px\" />\n          </FormItem>\n          <FormItem label=\"内容\" prop=\"content\" class=\"wangEditor\">\n            <editor v-model=\"form.content\"></editor>\n          </FormItem>\n          <FormItem label=\"新创建账号也推送\" prop=\"createSend\">\n            <i-switch size=\"large\" v-model=\"form.createSend\">\n              <span slot=\"open\">开启</span>\n              <span slot=\"close\">关闭</span>\n            </i-switch>\n          </FormItem>\n          <div v-if=\"type==0\">\n            <FormItem label=\"发送范围\">\n              <RadioGroup v-model=\"form.range\">\n                <Radio :label=\"0\">全体用户</Radio>\n                <Radio :label=\"1\">指定用户成员</Radio>\n              </RadioGroup>\n            </FormItem>\n            <div>\n              <FormItem label=\"选择用户\" v-if=\"form.range==1\">\n                <user-choose text=\"选择发送用户\" @on-change=\"handleSelectUser\" ref=\"user\"></user-choose>\n              </FormItem>\n            </div>\n          </div>\n          <Form-item class=\"br\">\n            <Button\n              type=\"primary\"\n              :loading=\"submitLoading\"\n              @click=\"handelSubmit\"\n              style=\"width:100px\"\n            >提交</Button>\n            <Button @click=\"handelCancel\">取消</Button>\n          </Form-item>\n          <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n        </Form>\n      </Row>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { getMessageDataById, addMessage, editMessage } from \"@/api/index\";\nimport editor from \"@/views/my-components/share/editor\";\nimport userChoose from \"@/views/my-components/share/user-choose\";\nexport default {\n  name: \"add_edit_message\",\n  components: {\n    userChoose,\n    editor\n  },\n  data() {\n    return {\n      type: 0,\n      loading: false, // 表单加载状态\n      selectUsers: [],\n      userModalVisible: false,\n      modalTitle: \"\", // 添加或编辑标题\n      form: {\n        // 添加或编辑表单对象初始化数据\n        title: \"\",\n        content: \"\",\n        type: \"\",\n        range: 0\n      },\n      formValidate: {\n        // 表单验证规则\n        type: [\n          { required: true, message: \"消息类型不能为空\", trigger: \"blur\" }\n        ],\n        title: [{ required: true, message: \"标题不能为空\", trigger: \"blur\" }],\n        content: [{ required: true, message: \"内容不能为空\", trigger: \"blur\" }]\n      },\n      submitLoading: false, // 添加或编辑提交状态\n      dictMessageType: this.$store.state.dict.messageType,\n      backRoute: \"\"\n    };\n  },\n  methods: {\n    init() {\n      this.type = this.$route.query.type;\n      this.backRoute = this.$route.query.backRoute;\n      if (this.type == 1) {\n        this.form.id = this.$route.query.id;\n        this.getData();\n      }\n    },\n    getData() {\n      this.loading = true;\n      getMessageDataById(this.form.id).then(res => {\n        this.loading = false;\n        if (res.success) {\n          // 转换null为\"\"\n          let v = res.result;\n          for (let attr in v) {\n            if (v[attr] == null) {\n              v[attr] = \"\";\n            }\n          }\n          let str = JSON.stringify(v);\n          let data = JSON.parse(str);\n          this.form = data;\n        }\n      });\n    },\n    handelSubmit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.submitLoading = true;\n          if (this.type == 0) {\n            // 添加 避免编辑后传入id等数据 记得删除\n            delete this.form.id;\n            // 用户id数据\n            let ids = [];\n            this.selectUsers.forEach(e => {\n              ids += e.id + \",\";\n            });\n            if (ids.length > 0) {\n              ids = ids.substring(0, ids.length - 1);\n            }\n            this.form.userIds = ids;\n            addMessage(this.form).then(res => {\n              this.submitLoading = false;\n              if (res.success) {\n                this.$Message.success(\"操作成功\");\n                this.closeCurrentPage();\n              }\n            });\n          } else if (this.type == 1) {\n            // 编辑\n            editMessage(this.form).then(res => {\n              this.submitLoading = false;\n              if (res.success) {\n                this.$Message.success(\"操作成功\");\n                this.closeCurrentPage();\n              }\n            });\n          }\n        }\n      });\n    },\n    handleSelectUser(v) {\n      this.selectUsers = v;\n    },\n    handelCancel() {\n      this.closeCurrentPage();\n    },\n    // 关闭当前页面\n    closeCurrentPage() {\n      this.$store.commit(\"removeTag\", \"add_edit_message\");\n      localStorage.pageOpenedList = JSON.stringify(\n        this.$store.state.app.pageOpenedList\n      );\n      this.$router.push({\n        name: this.backRoute\n      });\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n    // 监听路由变化\n    $route(to, from) {\n      if (to.name == \"add_edit_message\") {\n        this.type = this.$route.query.type;\n        if (this.type == 1) {\n          this.form.id = this.$route.query.id;\n          this.getData();\n        }\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/sys/message-manage"}]}